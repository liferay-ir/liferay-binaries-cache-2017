{"version":3,"sources":["../src/ClayDatasetDisplay.js"],"names":["ClayDatasetDisplay","selectedItems","totalItems","items","i","l","length","item","j","k","childrenItem","selected","push","_selectedItems","_totalItems","map","reduce","list","value","concat","Array","isArray","_flattenItems","event","emit","data","name","originalEvent","checkedStatus","target","checked","itemId","getAttribute","entries","Object","entry","index","views","selectedView","schema","inputValueField","splice","found","checkboxStatus","_selectAllItems","_deselectAllItems","active","view","ClayComponent","STATE","Config","array","internal","number","actionItems","actionItemsValidator","creationMenu","shapeOf","caption","string","helpText","maxPrimaryItems","maxSecondaryItems","maxTotalItems","primaryItems","creationMenuItemsValidator","secondaryItems","viewMoreURL","object","defaultEventHandler","elementClasses","filterItems","filterItemsValidator","filterLabels","filterLabelsValidator","id","searchActionURL","searchFormName","searchInputName","selectable","bool","showCreationMenu","showFiltersDoneButton","sortingOrder","oneOf","spritemap","required","title","arrayOf","disabled","href","icon","label","Soy","register","templates"],"mappings":"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","file":"ClayDatasetDisplay.js","sourcesContent":["import 'clay-card-grid';\nimport 'clay-list';\nimport 'clay-table';\nimport {\n\tactionItemsValidator,\n\tcreationMenuItemsValidator,\n\tfilterItemsValidator,\n\tfilterLabelsValidator,\n} from 'clay-management-toolbar';\nimport {Config} from 'metal-state';\nimport ClayComponent from 'clay-component';\nimport defineWebComponent from 'metal-web-component';\nimport Soy from 'metal-soy';\n\nimport templates from './ClayDatasetDisplay.soy.js';\n\n/**\n * Metal ClayDatasetDisplay component.\n * @extends ClayComponent\n */\nclass ClayDatasetDisplay extends ClayComponent {\n\t/**\n\t * @inheritDoc\n\t */\n\tcreated() {\n\t\tlet selectedItems = [];\n\t\tlet totalItems = 0;\n\n\t\tif (this.items) {\n\t\t\tfor (let i = 0, l = this.items.length; i < l; i++) {\n\t\t\t\tconst item = this.items[i];\n\n\t\t\t\tif (item.items) {\n\t\t\t\t\ttotalItems += item.items.length;\n\n\t\t\t\t\tfor (let j = 0, k = item.items.length; j < k; j++) {\n\t\t\t\t\t\tconst childrenItem = item.items[j];\n\n\t\t\t\t\t\tif (childrenItem.selected) {\n\t\t\t\t\t\t\tselectedItems.push(childrenItem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttotalItems++;\n\n\t\t\t\t\tif (item.selected) {\n\t\t\t\t\t\tselectedItems.push(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._selectedItems = selectedItems;\n\t\tthis._totalItems = totalItems;\n\t}\n\n\t/**\n\t * Iterates over the selected items array, mark all as not selected and\n\t * removes them from the selectedItems array.\n\t * @private\n\t */\n\t_deselectAllItems() {\n\t\tthis._selectedItems.map(item => (item.selected = false));\n\n\t\tthis._selectedItems = [];\n\t}\n\n\t/**\n\t * Flattens an array of items.\n\t * @param {Array} items\n\t * @return {Array}\n\t */\n\t_flattenItems(items) {\n\t\treturn items.reduce((list, value) => {\n\t\t\treturn list.concat(\n\t\t\t\tArray.isArray(value) ? this._flattenItems(value) : value\n\t\t\t);\n\t\t}, []);\n\t}\n\n\t/**\n\t * Returns the selected items.\n\t * @private\n\t * @return {?array|undefined} the items.\n\t */\n\tgetSelectedItems() {\n\t\treturn this._selectedItems;\n\t}\n\n\t/**\n\t * Continues the propagation of the action item clicked event\n\t * @param {!Event} event\n\t * @private\n\t * @return {Boolean} If the event has been prevented or not.\n\t */\n\t_handleActionItemClicked(event) {\n\t\treturn !this.emit({\n\t\t\tdata: event.data,\n\t\t\tname: 'actionItemClicked',\n\t\t\toriginalEvent: event,\n\t\t});\n\t}\n\n\t/**\n\t * Continues the propagation of the plus button clicked event\n\t * @param {!Event} event\n\t * @private\n\t * @return {Boolean} If the event has been prevented or not.\n\t */\n\t_handleCreationButtonClicked(event) {\n\t\treturn !this.emit({\n\t\t\tname: 'creationButtonClicked',\n\t\t\toriginalEvent: event,\n\t\t});\n\t}\n\n\t/**\n\t * Continues the propagation of the creation menu item clicked event\n\t * @param {!Event} event\n\t * @private\n\t * @return {Boolean} If the event has been prevented or not.\n\t */\n\t_handleCreationMenuItemClicked(event) {\n\t\treturn !this.emit({\n\t\t\tdata: event.data,\n\t\t\tname: 'creationMenuItemClicked',\n\t\t\toriginalEvent: event,\n\t\t});\n\t}\n\n\t/**\n\t * Continues the propagation of the creation menu more button clicked event\n\t * @param {!Event} event\n\t * @private\n\t * @return {Boolean} If the event has been prevented or not.\n\t */\n\t_handleCreationMenuMoreButtonClicked(event) {\n\t\treturn !this.emit({\n\t\t\tname: 'creationMenuMoreButtonClicked',\n\t\t\toriginalEvent: event,\n\t\t});\n\t}\n\n\t/**\n\t * Continues the propagation of the filter done clicked event\n\t * @param {!Event} event\n\t * @private\n\t * @return {Boolean} If the event has been prevented or not.\n\t */\n\t_handleFilterDoneClicked(event) {\n\t\treturn !this.emit({\n\t\t\tname: 'filterDoneClicked',\n\t\t\toriginalEvent: event,\n\t\t});\n\t}\n\n\t/**\n\t * Continues the propagation of the filter item click event\n\t * @param {!Event} event\n\t * @private\n\t * @return {Boolean} If the event has been prevented or not.\n\t */\n\t_handleFilterItemClicked(event) {\n\t\treturn !this.emit({\n\t\t\tdata: event.data,\n\t\t\tname: 'filterItemClicked',\n\t\t\toriginalEvent: event,\n\t\t});\n\t}\n\n\t/**\n\t * Toggles the selection of an item and adds or removes it from selected items\n\t * list.\n\t * @param {!Event} event\n\t * @private\n\t */\n\t_handleItemToggled(event) {\n\t\tlet checkedStatus = event.target.checked;\n\t\tlet itemId = event.target.getAttribute('value');\n\n\t\tif (!checkedStatus) {\n\t\t\tconst entries = Object.entries(this._selectedItems);\n\n\t\t\tfor (let i = 0, l = entries.length; i < l; i++) {\n\t\t\t\tconst entry = entries[i];\n\t\t\t\tconst index = entry[0];\n\t\t\t\tlet item = entry[1];\n\n\t\t\t\tif (\n\t\t\t\t\titem[\n\t\t\t\t\t\tthis.views[this.selectedView].schema.inputValueField\n\t\t\t\t\t] === itemId\n\t\t\t\t) {\n\t\t\t\t\titem.selected = false;\n\t\t\t\t\tthis._selectedItems.splice(index, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tlet found = false;\n\n\t\t\tif (this.items) {\n\t\t\t\tfor (let i = 0, l = this.items.length; i < l; i++) {\n\t\t\t\t\tconst item = this.items[i];\n\n\t\t\t\t\tif (item.items) {\n\t\t\t\t\t\tfor (let j = 0, k = item.items.length; j < k; j++) {\n\t\t\t\t\t\t\tconst childrenItem = item.items[j];\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tchildrenItem[\n\t\t\t\t\t\t\t\t\tthis.views[this.selectedView].schema\n\t\t\t\t\t\t\t\t\t\t.inputValueField\n\t\t\t\t\t\t\t\t] === itemId\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tchildrenItem.selected = true;\n\t\t\t\t\t\t\t\tthis._selectedItems.push(childrenItem);\n\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\titem[\n\t\t\t\t\t\t\t\tthis.views[this.selectedView].schema\n\t\t\t\t\t\t\t\t\t.inputValueField\n\t\t\t\t\t\t\t] === itemId\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\titem.selected = true;\n\t\t\t\t\t\t\tthis._selectedItems.push(item);\n\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (found) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.items = this.items;\n\t\tthis._selectedItems = this._selectedItems;\n\t}\n\n\t/**\n\t * Continues the propagation of the search event\n\t * @param {!Event} event\n\t * @private\n\t * @return {Boolean} If the event has been prevented or not.\n\t */\n\t_handleSearch(event) {\n\t\treturn !this.emit({\n\t\t\tname: 'search',\n\t\t\toriginalEvent: event,\n\t\t});\n\t}\n\n\t/**\n\t * Continues the propagation of the sorting button clicked event\n\t * @param {!Event} event\n\t * @private\n\t * @return {Boolean} If the event has been prevented or not.\n\t */\n\t_handleSortingButtonClicked(event) {\n\t\treturn !this.emit({\n\t\t\tdata: event.data,\n\t\t\tname: 'sortingButtonClicked',\n\t\t\toriginalEvent: event,\n\t\t});\n\t}\n\n\t/**\n\t * Changes the selection status of the dataset items on management toolbar\n\t * select page checkbox change.\n\t * @param {!Event} event\n\t * @private\n\t */\n\t_handleSelectPageCheckboxChanged(event) {\n\t\tlet checkboxStatus = event.data.checked;\n\n\t\tif (checkboxStatus) {\n\t\t\tthis._selectAllItems();\n\t\t} else {\n\t\t\tthis._deselectAllItems();\n\t\t}\n\t}\n\n\t/**\n\t * Changes the view on management toolbar view type click.\n\t * @param {!Event} event\n\t * @private\n\t */\n\t_handleViewTypeItemClicked(event) {\n\t\tconst item = event.data.item;\n\n\t\tthis.views[this.selectedView].active = false;\n\n\t\tfor (let i = 0, l = this.views.length; i < l; i++) {\n\t\t\tconst view = this.views[i];\n\n\t\t\tif (view === item) {\n\t\t\t\tthis.views[i].active = true;\n\t\t\t\tthis.selectedView = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Iterates over the items array, mark all as selected and adds them to the\n\t * selectedItems array.\n\t * @private\n\t */\n\t_selectAllItems() {\n\t\tconst selectedItems = this.items.map(item => {\n\t\t\tif (Array.isArray(item.items)) {\n\t\t\t\treturn item.items.map(item => {\n\t\t\t\t\titem.selected = true;\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\titem.selected = true;\n\t\t\t\treturn item;\n\t\t\t}\n\t\t});\n\n\t\tthis._selectedItems = this._flattenItems(selectedItems);\n\t}\n}\n\n/**\n * State definition.\n * @static\n * @type {!Object}\n */\nClayDatasetDisplay.STATE = {\n\t/**\n\t * The selected items of the item list. For internal purposes.\n\t * @default undefined\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?(array|undefined)}\n\t */\n\t_selectedItems: Config.array().internal(),\n\n\t/**\n\t * The total number of items in the item list. For internal purposes.\n\t * @default undefined\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?(number|undefined)}\n\t */\n\t_totalItems: Config.number().internal(),\n\n\t/**\n\t * List of items to display in the management toolbar actions menu.\n\t * @default []\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?(array|undefined)}\n\t */\n\tactionItems: actionItemsValidator,\n\n\t/**\n\t * Configuration of the management bar plus button.\n\t * @default undefined\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?(object|string|bool|undefined)}\n\t */\n\tcreationMenu: Config.shapeOf({\n\t\tcaption: Config.string(),\n\t\thelpText: Config.string(),\n\t\tmaxPrimaryItems: Config.number(),\n\t\tmaxSecondaryItems: Config.number(),\n\t\tmaxTotalItems: Config.number(),\n\t\tprimaryItems: creationMenuItemsValidator,\n\t\tsecondaryItems: creationMenuItemsValidator,\n\t\tviewMoreURL: Config.string(),\n\t}),\n\n\t/**\n\t * Data to add to the element.\n\t * @default undefined\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?object}\n\t */\n\tdata: Config.object(),\n\n\t/**\n\t * Object that wires events with default listeners\n\t * @default undefined\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @review\n\t * @type {?(object|undefined)}\n\t */\n\tdefaultEventHandler: Config.object(),\n\n\t/**\n\t * CSS classes to be applied to the element.\n\t * @default undefined\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?(string|undefined)}\n\t */\n\telementClasses: Config.string(),\n\n\t/**\n\t * List of filter menu items.\n\t * @default undefined\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?(array|undefined)}\n\t */\n\tfilterItems: filterItemsValidator,\n\n\t/**\n\t * List of filter label items.\n\t * @default undefined\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?(array|undefined)}\n\t */\n\tfilterLabels: filterLabelsValidator,\n\n\t/**\n\t * Id to be applied to the element.\n\t * @default undefined\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?(string|undefined)}\n\t */\n\tid: Config.string(),\n\n\t/**\n\t * Items of the dataset.\n\t * @default undefined\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?(array|undefined)}\n\t */\n\titems: Config.array(),\n\n\t/**\n\t * URL of the search form action\n\t * @default undefined\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?(string|undefined)}\n\t */\n\tsearchActionURL: Config.string(),\n\n\t/**\n\t * Name of the search form.\n\t * @default undefined\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?(string|undefined)}\n\t */\n\tsearchFormName: Config.string(),\n\n\t/**\n\t * Name of the search input.\n\t * @default undefined\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?(string|undefined)}\n\t */\n\tsearchInputName: Config.string(),\n\n\t/**\n\t * Flag to indicate if the dataset is selectable.\n\t * @default false\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?bool}\n\t */\n\tselectable: Config.bool().value(false),\n\n\t/**\n\t * Position in the views list of the selected view.\n\t * @default undefined\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?(number|undefined)}\n\t */\n\tselectedView: Config.number(),\n\n\t/**\n\t * Flag to indicate if management toolbar creation menu button should be\n\t * shown or not.\n\t * @default true\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?bool}\n\t */\n\tshowCreationMenu: Config.bool().value(true),\n\n\t/**\n\t * Flag to indicate if the `Done` button in management toolbar filter dropdown\n\t * should be shown or not.\n\t * @default true\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?bool}\n\t */\n\tshowFiltersDoneButton: Config.bool().value(true),\n\n\t/**\n\t * Sorting order.\n\t * @default asc\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?(string|undefined)}\n\t */\n\tsortingOrder: Config.oneOf(['asc', 'desc']).value('asc'),\n\n\t/**\n\t * The path to the SVG spritemap file containing the icons.\n\t * @default undefined\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {!string}\n\t */\n\tspritemap: Config.string().required(),\n\n\t/**\n\t * Header of the list.\n\t * @default undefined\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?(string|undefined)}\n\t */\n\ttitle: Config.string(),\n\n\t/**\n\t * List of view items.\n\t * @default undefined\n\t * @instance\n\t * @memberof ClayDatasetDisplay\n\t * @type {?(array|undefined)}\n\t */\n\tviews: Config.arrayOf(\n\t\tConfig.shapeOf({\n\t\t\tactive: Config.bool().value(false),\n\t\t\tdisabled: Config.bool().value(false),\n\t\t\thref: Config.string(),\n\t\t\ticon: Config.string().required(),\n\t\t\tid: Config.string().required(),\n\t\t\tlabel: Config.string().required(),\n\t\t})\n\t),\n};\n\ndefineWebComponent('clay-dataset-display', ClayDatasetDisplay);\n\nSoy.register(ClayDatasetDisplay, templates);\n\nexport {ClayDatasetDisplay};\nexport default ClayDatasetDisplay;\n"]}