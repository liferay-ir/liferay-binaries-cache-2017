{"version":3,"sources":["../../src/report/html.js"],"names":["htmlDump","report","_executionDate","_executionTime","_packages","_versionsInfo","_warnings","title","summary","htmlTable","htmlRow","toUTCString","htmlIf","warnings","length","htmlSection","htmlList","versionsInfo","Object","keys","map","pkgName","dependencies","sort","pkgId","allFiles","copiedFiles","link","name","version","packageProcesses","pkg","process","babel","copy","post","pre","copyKeys","preKeys","postKeys","babelKeys","files","copyNotice","preNotice","babelNotice","postNotice","packageProcessesBundlerDetails","htmlSubsection","htmlLogOutput","pluginName","JSON","stringify","plugin","config","logger","source","packageProcessesBabelDetails","filePath","condition","contentGenerator","contents","join","args","arg","columns","slice","content","Array","isArray","column","prefixColumns","prefixCells","rowLoggers","Error","logColums","splice","concat","rows","forEach","cells","i","msgs","messages","push","cell","msg0","sourceCell","level","toUpperCase","things"],"mappings":"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","file":"html.js","sourcesContent":["/**\n * Â© 2017 Liferay, Inc. <https://liferay.com>\n *\n * SPDX-License-Identifier: LGPL-3.0-or-later\n */\n\n/* eslint require-jsdoc: off */\nimport pretty from 'pretty-time';\n\nexport function htmlDump(report) {\n\tconst {\n\t\t_executionDate,\n\t\t_executionTime,\n\t\t_packages,\n\t\t_versionsInfo,\n\t\t_warnings,\n\t} = report;\n\n\tconst title = 'Report of liferay-npm-bundler execution';\n\n\tconst summary = htmlTable([\n\t\thtmlRow(\n\t\t\t`<td>Executed at:</td><td>${_executionDate.toUTCString()}</td>`\n\t\t),\n\t\thtmlIf(_executionTime, () =>\n\t\t\thtmlRow(\n\t\t\t\t`<td>Execution took:</td><td>${pretty(_executionTime)}</td>`\n\t\t\t)\n\t\t),\n\t]);\n\n\tconst warnings = htmlIf(_warnings.length > 0, () =>\n\t\thtmlSection('Warnings', htmlList(..._warnings))\n\t);\n\n\tconst versionsInfo = htmlSection(\n\t\t'Bundler environment versions',\n\t\thtmlTable(\n\t\t\t'Package',\n\t\t\t'Version',\n\t\t\tObject.keys(_versionsInfo).map(pkgName =>\n\t\t\t\thtmlRow(`\n\t\t\t\t\t<td>${pkgName}</td>\n\t\t\t\t\t<td>${_versionsInfo[pkgName]}</td>\n\t\t\t\t`)\n\t\t\t)\n\t\t)\n\t);\n\n\tconst dependencies = htmlSection(\n\t\t'Bundled packages',\n\t\thtmlTable(\n\t\t\t'Package',\n\t\t\t'Version',\n\t\t\t'Copied files',\n\t\t\t'Excluded files',\n\t\t\t'Linked to',\n\t\t\tObject.keys(_packages)\n\t\t\t\t.sort()\n\t\t\t\t.map(pkgId => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tallFiles,\n\t\t\t\t\t\tcopiedFiles,\n\t\t\t\t\t\tlink,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tversion,\n\t\t\t\t\t} = _packages[pkgId];\n\n\t\t\t\t\treturn htmlRow(`\n\t\t\t\t\t\t<td>${name}</td>\n\t\t\t\t\t\t<td>${version}</td>\n\t\t\t\t\t\t<td>${htmlIf(copiedFiles, () => copiedFiles.length)}</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t${htmlIf(allFiles && copiedFiles, () => allFiles.length - copiedFiles.length)}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>${htmlIf(link, () => link)}</td>\n\t\t\t\t\t`);\n\t\t\t\t})\n\t\t)\n\t);\n\n\tconst packageProcesses = htmlSection(\n\t\t'Summary of package transformations',\n\t\thtmlTable(\n\t\t\t'Package',\n\t\t\t'Version',\n\t\t\t'Copy phase',\n\t\t\t'Pre-babel phase',\n\t\t\t'Babel phase',\n\t\t\t'Post-babel phase',\n\t\t\tObject.keys(_packages)\n\t\t\t\t.sort()\n\t\t\t\t.map(pkgId => {\n\t\t\t\t\tconst pkg = _packages[pkgId];\n\t\t\t\t\tconst {babel, copy, post, pre} = pkg.process;\n\t\t\t\t\tconst copyKeys = Object.keys(copy);\n\t\t\t\t\tconst preKeys = Object.keys(pre);\n\t\t\t\t\tconst postKeys = Object.keys(post);\n\t\t\t\t\tconst babelKeys = Object.keys(babel.files);\n\n\t\t\t\t\tconst copyNotice = htmlIf(\n\t\t\t\t\t\tcopyKeys.length > 0,\n\t\t\t\t\t\t() => `${copyKeys.length} plugins applied`\n\t\t\t\t\t);\n\t\t\t\t\tconst preNotice = htmlIf(\n\t\t\t\t\t\tpreKeys.length > 0,\n\t\t\t\t\t\t() => `${preKeys.length} plugins applied`\n\t\t\t\t\t);\n\t\t\t\t\tconst babelNotice = htmlIf(\n\t\t\t\t\t\tbabelKeys.length > 0,\n\t\t\t\t\t\t() => `${babelKeys.length} files processed`\n\t\t\t\t\t);\n\t\t\t\t\tconst postNotice = htmlIf(\n\t\t\t\t\t\tpostKeys.length > 0,\n\t\t\t\t\t\t() => `${postKeys.length} plugins applied`\n\t\t\t\t\t);\n\n\t\t\t\t\treturn htmlRow(`\n\t\t\t\t\t\t<td>${pkg.name}</td>\n\t\t\t\t\t\t<td>${pkg.version}</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<a href=\"#${pkgId}-bundler\">\n\t\t\t\t\t\t\t\t${copyNotice}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<a href=\"#${pkgId}-bundler\">\n\t\t\t\t\t\t\t\t${preNotice}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<a href=\"#${pkgId}-babel\">\n\t\t\t\t\t\t\t\t${babelNotice}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<a href=\"#${pkgId}-bundler\">\n\t\t\t\t\t\t\t\t${postNotice}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t`);\n\t\t\t\t})\n\t\t)\n\t);\n\n\tconst packageProcessesBundlerDetails = htmlSection(\n\t\t'Details of bundler transformations',\n\t\t...Object.keys(_packages)\n\t\t\t.sort()\n\t\t\t.map(pkgId => {\n\t\t\t\tconst pkg = _packages[pkgId];\n\t\t\t\tconst {copy, post, pre} = pkg.process;\n\t\t\t\tconst copyKeys = Object.keys(copy);\n\t\t\t\tconst preKeys = Object.keys(pre);\n\t\t\t\tconst postKeys = Object.keys(post);\n\n\t\t\t\treturn htmlIf(\n\t\t\t\t\tcopyKeys.length > 0 ||\n\t\t\t\t\t\tpreKeys.length > 0 ||\n\t\t\t\t\t\tpostKeys.length > 0,\n\t\t\t\t\t() =>\n\t\t\t\t\t\thtmlSubsection(\n\t\t\t\t\t\t\t`\n\t\t\t\t\t\t\t<a name=\"${pkgId}-bundler\">\n\t\t\t\t\t\t\t\t${pkg.name}@${pkg.version}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t...htmlIf(copyKeys.length > 0, () =>\n\t\t\t\t\t\t\t\tcopyKeys\n\t\t\t\t\t\t\t\t\t.sort()\n\t\t\t\t\t\t\t\t\t.map(pluginName =>\n\t\t\t\t\t\t\t\t\t\thtmlLogOutput(\n\t\t\t\t\t\t\t\t\t\t\t['Copy phase plugin', 'Config'],\n\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\t\tpluginName,\n\t\t\t\t\t\t\t\t\t\t\t\t\tJSON.stringify(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcopy[pluginName].plugin\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.config\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t[copy[pluginName].logger],\n\t\t\t\t\t\t\t\t\t\t\t{source: false}\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t...htmlIf(preKeys.length > 0, () =>\n\t\t\t\t\t\t\t\tpreKeys\n\t\t\t\t\t\t\t\t\t.sort()\n\t\t\t\t\t\t\t\t\t.map(pluginName =>\n\t\t\t\t\t\t\t\t\t\thtmlLogOutput(\n\t\t\t\t\t\t\t\t\t\t\t['Pre-phase plugin', 'Config'],\n\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\t\tpluginName,\n\t\t\t\t\t\t\t\t\t\t\t\t\tJSON.stringify(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpre[pluginName].plugin\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.config\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t[pre[pluginName].logger],\n\t\t\t\t\t\t\t\t\t\t\t{source: false}\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t...htmlIf(postKeys.length > 0, () =>\n\t\t\t\t\t\t\t\tpostKeys\n\t\t\t\t\t\t\t\t\t.sort()\n\t\t\t\t\t\t\t\t\t.map(pluginName =>\n\t\t\t\t\t\t\t\t\t\thtmlLogOutput(\n\t\t\t\t\t\t\t\t\t\t\t['Post-phase plugin', 'Config'],\n\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\t\tpluginName,\n\t\t\t\t\t\t\t\t\t\t\t\t\tJSON.stringify(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpost[pluginName].plugin\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.config\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t[post[pluginName].logger],\n\t\t\t\t\t\t\t\t\t\t\t{source: false}\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t})\n\t);\n\n\tconst packageProcessesBabelDetails = htmlSection(\n\t\t'Details of Babel transformations',\n\t\t...Object.keys(_packages)\n\t\t\t.sort()\n\t\t\t.map(pkgId => {\n\t\t\t\tconst pkg = _packages[pkgId];\n\t\t\t\tconst {babel} = pkg.process;\n\t\t\t\tconst babelKeys = Object.keys(babel.files);\n\n\t\t\t\treturn htmlIf(babelKeys.length > 0, () =>\n\t\t\t\t\thtmlSubsection(\n\t\t\t\t\t\t`\n\t\t\t\t\t\t\t<a name=\"${pkgId}-babel\">\n\t\t\t\t\t\t\t\t${pkg.name}@${pkg.version}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t`,\n\t\t\t\t\t\t`<p>\n\t\t\t\t\t\t\tConfiguration: \n\t\t\t\t\t\t\t${JSON.stringify(babel.config)}\n\t\t\t\t\t\t</p>`,\n\t\t\t\t\t\thtmlLogOutput(\n\t\t\t\t\t\t\t['File'],\n\t\t\t\t\t\t\tbabelKeys.sort().map(filePath => [filePath]),\n\t\t\t\t\t\t\tbabelKeys\n\t\t\t\t\t\t\t\t.sort()\n\t\t\t\t\t\t\t\t.map(filePath => babel.files[filePath].logger)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t})\n\t);\n\n\treturn `\n\t\t<!DOCTYPE html>\n\t\t<html>\n\t\t\t<head>\n\t\t\t\t<meta charset=\"utf-8\" />\n\t\t\t\t<title>${title}</title>\n\t\t\t\t<style>\n\t\t\t\t\tbody, h1, h2, h3, p, li {\n\t\t\t\t\t\tfont-family: sans-serif;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tbody, p, th, td, li {\n\t\t\t\t\t\tfont-size: 10pt;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\th1 {\n\t\t\t\t\t\tfont-size: 16pt;\n\t\t\t\t\t\tmargin: 1em 0 .5em 0;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\th2 {\n\t\t\t\t\t\tfont-size: 13pt;\n\t\t\t\t\t\tmargin: 1em 0 .5em 0;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\th3 {\n\t\t\t\t\t\tfont-size: 11pt;\n\t\t\t\t\t\tmargin: 1em 0 .5em 0;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\ttable {\n\t\t\t\t\t\tmargin: 0 0 .5em 0;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\ttr:nth-child(odd) {\n\t\t\t\t\t\tbackground-color: #F6F6F6;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tth {\n\t\t\t\t\t\tbackground-color: #F0F0F0;\n\t\t\t\t\t\ttext-align: left;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tth, td {\n\t\t\t\t\t\tpadding: .1em 0;\n\t\t\t\t\t\tvertical-align: top;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\ttd.info, td.warn, td.error {\n\t\t\t\t\t\tbackground: green;\n\t\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\tvertical-align: middle;\n\t\t\t\t\t\twidth: 1px;\n\t\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\t}\n\n\t\t\t\t\ttd.warn {\n\t\t\t\t\t\tbackground: orange;\n\t\t\t\t\t}\n\n\t\t\t\t\ttd.error {\n\t\t\t\t\t\tbackground: red;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\ttd.source {\n\t\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\t}\n\n\t\t\t\t\tul {\n\t\t\t\t\t\tpadding-left: 1em;\n\t\t\t\t\t\tmargin: 0 0 .5em 0;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tp {\n\t\t\t\t\t\tmargin: 0 0 .5em 0;\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t\t<script id=\"report\" type=\"application/json\">\n\t\t\t\t\t${JSON.stringify(report)}\n\t\t\t\t</script>\n\t\t\t\t<script>\n\t\t\t\t\twindow.report = JSON.parse(\n\t\t\t\t\t\tdocument.getElementById(\"report\").innerHTML\n\t\t\t\t\t);\n\t\t\t\t</script>\n\t\t\t</head>\n\t\t\t<body>\n\t\t\t\t<h1>${title}</h1>\n\t\t\t\t${summary}\n\t\t\t\t${warnings}\n\t\t\t\t${versionsInfo}\n\t\t\t\t${dependencies}\n\t\t\t\t${packageProcesses}\n\t\t\t\t${packageProcessesBundlerDetails}\n\t\t\t\t${packageProcessesBabelDetails}\n\t\t\t</body>\n\t\t</html>\n\t`;\n}\n\nfunction htmlIf(condition, contentGenerator) {\n\treturn condition ? contentGenerator() : '';\n}\n\nfunction htmlSection(title, ...contents) {\n\treturn `\n\t\t<h2>${title}</h2>\n\t\t${contents.join('\\n')}\n\t`;\n}\n\nfunction htmlSubsection(title, ...contents) {\n\treturn `\n\t\t<h3>${title}</h3>\n\t\t${contents.join('\\n')}\n\t`;\n}\n\nfunction htmlList(...args) {\n\treturn `\n\t\t<ul>\n\t\t\t${args.map(arg => `<li>${arg}</li>`).join(' ')}\n\t\t</ul>\n\t`;\n}\n\nfunction htmlTable(...args) {\n\tconst columns = args.slice(0, args.length - 1);\n\tlet content = args[args.length - 1];\n\n\tif (Array.isArray(content)) {\n\t\tcontent = content.join('\\n');\n\t}\n\n\tif (columns.length == 0) {\n\t\treturn `\n\t\t\t<table>\n\t\t\t\t${content}\n\t\t\t</table>\n\t\t`;\n\t} else {\n\t\treturn `\n\t\t\t<table>\n\t\t\t\t${htmlRow(columns.map(column => `<th>${column}</th>`))}\n\t\t\t\t${content}\n\t\t\t</table>\n\t\t`;\n\t}\n}\n\nfunction htmlRow(content) {\n\tif (Array.isArray(content)) {\n\t\tcontent = content.join('\\n');\n\t}\n\n\treturn `<tr>${content}</tr>`;\n}\n\n/**\n * Dump a table with the output of a PluginLogger\n * @param  {Array} prefixColumns [description]\n * @param  {Array<Array>} prefixCells an array with one array per row containing the prefix cell content\n * @param  {Array} rowLoggers an array with one logger per row in prefixCells\n * @param  {boolean} source whether or not to show 'Log source' column\n * @return {String} an HTML table\n */\nfunction htmlLogOutput(\n\tprefixColumns,\n\tprefixCells,\n\trowLoggers,\n\t{source} = {source: true}\n) {\n\tif (prefixCells.length != rowLoggers.length) {\n\t\tthrow new Error(\n\t\t\t'The length of prefixCells and rowLoggers must be the same'\n\t\t);\n\t}\n\n\tconst logColums = ['Message', ''];\n\n\tif (source) {\n\t\tlogColums.splice(0, 0, 'Log source');\n\t}\n\n\tconst columns = prefixColumns.concat(logColums);\n\n\tconst rows = [];\n\n\tprefixCells.forEach((cells, i) => {\n\t\tif (cells.length != prefixColumns.length) {\n\t\t\tthrow new Error(\n\t\t\t\t`Prefix cells row ${i} has an invalid length: ${cells.length}`\n\t\t\t);\n\t\t}\n\n\t\tconst msgs = rowLoggers[i].messages;\n\n\t\tif (msgs.length == 0) {\n\t\t\trows.push(\n\t\t\t\thtmlRow(`\n\t\t\t\t\t${cells.map(cell => `<td>${cell}</td>`).join(' ')}\n\t\t\t\t\t${htmlIf(source, () => `<td></td>`)}\n\t\t\t\t\t${logColums\n\t\t\t\t\t\t.splice(1)\n\t\t\t\t\t\t.map(() => '<td></td>')\n\t\t\t\t\t\t.join(' ')}\n\t\t\t\t`)\n\t\t\t);\n\t\t} else {\n\t\t\tconst msg0 = msgs[0];\n\n\t\t\tlet sourceCell = htmlIf(\n\t\t\t\tsource,\n\t\t\t\t() => `<td class=\"source\">${msg0.source}</td>`\n\t\t\t);\n\n\t\t\trows.push(\n\t\t\t\thtmlRow(`\n\t\t\t\t\t${cells.map(cell => `<td>${cell}</td>`).join(' ')}\n\t\t\t\t\t${sourceCell}\n\t\t\t\t\t<td class=\"${msg0.level}\">${msg0.level.toUpperCase()}</td>\n\t\t\t\t\t<td>${msg0.things.join(' ')}</td>\n\t\t\t\t`)\n\t\t\t);\n\n\t\t\tfor (let i = 1; i < msgs.length; i++) {\n\t\t\t\tsourceCell = htmlIf(\n\t\t\t\t\tsource,\n\t\t\t\t\t() => `<td class=\"source\">${msgs[i].source}</td>`\n\t\t\t\t);\n\n\t\t\t\trows.push(\n\t\t\t\t\thtmlRow(`\n\t\t\t\t\t\t${cells.map(() => `<td></td>`).join(' ')}\n\t\t\t\t\t\t${sourceCell}\n\t\t\t\t\t\t<td class=\"${msgs[i].level}\">\n\t\t\t\t\t\t\t${msgs[i].level.toUpperCase()}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>${msgs[i].things.join(' ')}</td>\n\t\t\t\t\t`)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn htmlTable(...columns, rows);\n}\n"]}