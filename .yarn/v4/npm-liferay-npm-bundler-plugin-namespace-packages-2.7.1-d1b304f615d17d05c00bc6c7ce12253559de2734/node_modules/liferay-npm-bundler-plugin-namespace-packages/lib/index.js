'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

exports.default = function (_ref, _ref2) {
	var log = _ref.log,
	    pkg = _ref.pkg,
	    rootPkgJson = _ref.rootPkgJson;
	var pkgJson = _ref2.pkgJson;

	if (!pkg.isRoot) {
		pkgJson.name = ns.addNamespace(pkgJson.name, rootPkgJson);

		log.info('namespace-packages', 'Namespaced package');
	}

	pkgJson.dependencies = pkgJson.dependencies || {};

	Object.keys(pkgJson.dependencies).forEach(function (pkgName) {
		var namespacedPkgName = ns.addNamespace(pkgName, rootPkgJson);
		var version = pkgJson.dependencies[pkgName];

		pkgJson.dependencies[namespacedPkgName] = version;

		delete pkgJson.dependencies[pkgName];
	});

	log.info('namespace-packages', 'Namespaced', Object.keys(pkgJson.dependencies).length, 'dependencies');
};

var _namespace = require('liferay-npm-build-tools-common/lib/namespace');

var ns = _interopRequireWildcard(_namespace);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }
//# sourceMappingURL=index.js.map