{"version":3,"sources":["../../src/__tests__/index.test.js"],"names":["babel","babelIpc","logger","beforeEach","set","__filename","log","it","source","transform","filenameRelative","plugins","expect","messages","toMatchSnapshot","code"],"mappings":";;AAMA;;IAAYA,K;;AACZ;;IAAYC,Q;;AACZ;;;;AACA;;;;;;;;AATA;;;;;;AAWA,IAAIC,eAAJ;;AAEAC,WAAW,YAAM;AAChBF,UAASG,GAAT,CAAaC,UAAb,EAAyB;AACxBC,OAAMJ,SAAS;AADS,EAAzB;AAGA,CAJD;;AAMAK,GAAG,wBAAH,EAA6B,YAAM;AAClC,KAAMC,sHAAN;;AAMAR,OAAMS,SAAN,CAAgBD,MAAhB,EAAwB;AACvBE,oBAAkBL,UADK;AAEvBM,WAAS;AAFc,EAAxB;;AAKAC,QAAOV,OAAOW,QAAd,EAAwBC,eAAxB;AACA,CAbD;;AAeAP,GAAG,yBAAH,EAA8B,YAAM;AACnC,KAAMC,6JAAN;;AADmC,wBASpBR,MAAMS,SAAN,CAAgBD,MAAhB,EAAwB;AACtCE,oBAAkBL,UADoB;AAEtCM,WAAS;AAF6B,EAAxB,CAToB;AAAA,KAS5BI,IAT4B,oBAS5BA,IAT4B;;AAcnCH,QAAOG,IAAP,EAAaD,eAAb;AACA,CAfD","file":"index.test.js","sourcesContent":["/**\n * Â© 2017 Liferay, Inc. <https://liferay.com>\n *\n * SPDX-License-Identifier: LGPL-3.0-or-later\n */\n\nimport * as babel from 'babel-core';\nimport * as babelIpc from 'liferay-npm-build-tools-common/lib/babel-ipc';\nimport PluginLogger from 'liferay-npm-build-tools-common/lib/plugin-logger';\nimport plugin from '../index';\n\nlet logger;\n\nbeforeEach(() => {\n\tbabelIpc.set(__filename, {\n\t\tlog: (logger = new PluginLogger()),\n\t});\n});\n\nit('logs results correctly', () => {\n\tconst source = `\n\tconsole.log('Say something');\n\tvar a = require('a-module');\n\tvar b = require('b-module');\n\t`;\n\n\tbabel.transform(source, {\n\t\tfilenameRelative: __filename,\n\t\tplugins: [plugin],\n\t});\n\n\texpect(logger.messages).toMatchSnapshot();\n});\n\nit('correctly wraps modules', () => {\n\tconst source = `\n\tconsole.log('Say something');\n\tif (1 == 0) {\n\t\tconsole.log('Something broke in the Matrix');\n\t}\n\tmodule.exports = 'All OK';\n\t`;\n\n\tconst {code} = babel.transform(source, {\n\t\tfilenameRelative: __filename,\n\t\tplugins: [plugin],\n\t});\n\n\texpect(code).toMatchSnapshot();\n});\n"]}