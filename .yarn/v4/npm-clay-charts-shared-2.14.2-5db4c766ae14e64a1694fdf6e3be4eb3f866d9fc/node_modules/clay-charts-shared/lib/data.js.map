{"version":3,"sources":["../src/data.js"],"names":["resolveData","data","Promise","resolve","reject","Array","isArray","then","val","fetch","cors","res","json"],"mappings":";;;;;QAMgBA,W,GAAAA,W;;AANhB;;AAEA;;;;AAIO,SAASA,WAAT,CAAqBC,IAArB,EAA2B;AACjC,QAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC,MAAIC,MAAMC,OAAN,CAAcL,IAAd,KAAwB,qBAASA,IAAT,KAAkB,CAAC,uBAAWA,IAAX,CAA/C,EAAkE;AACjEE,WAAQF,IAAR;AACA,GAFD,MAEO,IAAI,uBAAWA,IAAX,CAAJ,EAAsB;AAC5BA,UAAOM,IAAP,CAAY;AAAA,WAAOJ,QAAQK,GAAR,CAAP;AAAA,IAAZ;AACA,GAFM,MAEA,IAAI,qBAASP,IAAT,CAAJ,EAAoB;AAC1BQ,SAAMR,IAAN,EAAY,EAACS,MAAM,MAAP,EAAZ,EACEH,IADF,CACO;AAAA,WAAOI,IAAIC,IAAJ,EAAP;AAAA,IADP,EAEEL,IAFF,CAEO,eAAO;AACZ,QAAI,CAAC,4BAAgBI,GAAhB,CAAL,EAA2B;AAC1B,YAAOP,OAAOO,GAAP,CAAP;AACA;AACD,QAAI,4BAAgBA,IAAIV,IAApB,CAAJ,EAA+B;AAC9B,YAAOE,QAAQQ,IAAIV,IAAZ,CAAP;AACA,KAFD,MAEO;AACN,YAAOE,QAAQQ,GAAR,CAAP;AACA;AACD,IAXF;AAYA,GAbM,MAaA;AACNP,uCAAkCH,IAAlC;AACA;AACD,EArBM,CAAP;AAsBA","file":"data.js","sourcesContent":["import {isDefAndNotNull, isFunction, isObject, isString} from 'metal';\n\n/**\n * @param {Array|Function|Object} data\n * @return {Promise}\n */\nexport function resolveData(data) {\n\treturn new Promise((resolve, reject) => {\n\t\tif (Array.isArray(data) || (isObject(data) && !isFunction(data))) {\n\t\t\tresolve(data);\n\t\t} else if (isFunction(data)) {\n\t\t\tdata().then(val => resolve(val));\n\t\t} else if (isString(data)) {\n\t\t\tfetch(data, {cors: 'cors'})\n\t\t\t\t.then(res => res.json())\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (!isDefAndNotNull(res)) {\n\t\t\t\t\t\treturn reject(res);\n\t\t\t\t\t}\n\t\t\t\t\tif (isDefAndNotNull(res.data)) {\n\t\t\t\t\t\treturn resolve(res.data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn resolve(res);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t} else {\n\t\t\treject(`Could not resolve data: ${data}`);\n\t\t}\n\t});\n}\n"]}