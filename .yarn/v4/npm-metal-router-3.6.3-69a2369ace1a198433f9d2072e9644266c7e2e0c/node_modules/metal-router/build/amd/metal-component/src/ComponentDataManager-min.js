define(["exports","metal/src/metal","metal-state/src/all/state"],function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=n(a),u=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),i={components:!0,context:!0,element:!0,refs:!0,state:!0,stateKey:!0,wasRendered:!0},o="__DATA_MANAGER_DATA__",l=function(){function t(){r(this,t)}return u(t,[{key:"createState_",value:function(t,a){var n=new s["default"](t.getInitialConfig(),t,t);n.setKeysBlacklist(i),n.configState(e.object.mixin({},a,s["default"].getStateStatic(t.constructor))),this.getManagerData(t).state_=n}},{key:"dispose",value:function(t){var e=this.getManagerData(t);e.state_&&e.state_.dispose(),t[o]=null}},{key:"get",value:function(t,e){return this.getManagerData(t).state_.get(e)}},{key:"getManagerData",value:function(t){return t[o]}},{key:"getSyncKeys",value:function(t){return this.getManagerData(t).state_.getStateKeys()}},{key:"getStateKeys",value:function(t){return this.getManagerData(t).state_.getStateKeys()}},{key:"getState",value:function(t){return this.getManagerData(t).state_.getState()}},{key:"getStateInstance",value:function(t){return this.getManagerData(t).state_}},{key:"replaceNonInternal",value:function(t,e,a){for(var n=a||this.getManagerData(t).state_,r=n.getStateKeys(),s=0;s<r.length;s++){var u=r[s];n.getStateKeyConfig(u).internal||(e.hasOwnProperty(u)?n.set(u,e[u]):n.setDefaultValue(u))}}},{key:"setState",value:function(t,e,a){this.getManagerData(t).state_.setState(e,a)}},{key:"setUp",value:function(t,e){t[o]={},this.createState_(t,e)}}]),t}();t["default"]=new l});