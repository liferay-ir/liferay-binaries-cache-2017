define(["exports","metal/src/metal","metal-dom/src/all/dom","metal-component/src/all/component","../incremental-dom-aop"],function(e,t,n,r,i){"use strict";function o(e,n,r,o){var u=s(r);return u?void a(e,n,r,u,o):(o=c(r,o),d(n,r,o),void((0,t.isBoolean)(o)?v(n,r,o):(0,i.getOriginalFn)("attributes")(n,r,o)))}function a(e,r,i,o,a){if(!(0,t.isServerSide)()){var u=o+f;r[u]&&(r[u].removeListener(),r[u]=null),a&&(r[i]=a,r[u]=(0,n.delegate)(document,o,r,a))}}function u(e,t){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];t[i]=l(e,i,t[i])}}function l(e,n,i){if((0,t.isString)(i)){var o=s(n);if(o){var a=(0,r.getComponentFn)(e,i);if(a)return a}}return i}function c(e,n){return"checked"===e&&(n=(0,t.isDefAndNotNull)(n)&&n!==!1),n}function s(e){var t=m.exec(e),n=t?t[1]?t[1]:t[2]:null;return n?n.toLowerCase():null}function v(e,n,r){(0,t.isServerSide)()||(e[n]=r,r?e.setAttribute(n,""):e.removeAttribute(n))}function d(e,n,r){(0,t.isServerSide)()||"value"===n&&e.value!==r&&(e[n]=r)}Object.defineProperty(e,"__esModule",{value:!0}),e.applyAttribute=o,e.convertListenerNamesToFns=u;var f="__handle__",m=/^(?:on([A-Z].+))|(?:data-on(.+))$/});