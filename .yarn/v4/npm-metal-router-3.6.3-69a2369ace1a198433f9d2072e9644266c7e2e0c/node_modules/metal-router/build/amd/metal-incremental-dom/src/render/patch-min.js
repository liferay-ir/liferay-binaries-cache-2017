define(["exports","metal-dom/src/all/dom","../data","./render"],function(e,t,n,r){"use strict";function a(e){if(!e||!e.parentNode){var n=document.createElement("div");return e&&(0,t.append)(n,e),n}}function c(e,t,a){d.push(e);var c=(0,n.getData)(e);c.render||(c.render=r.render.bind(null,e));var i=a?IncrementalDOM.patchOuter:IncrementalDOM.patch;i(t,c.render),d.pop()}function i(){return d[d.length-1]}function u(e){if(!o(e)&&!l(e)){var t=e.element;c(e,t,!0)}}function o(e){var t=(0,n.getData)(e);if(!e.element&&t.parent)return t.parent.getRenderer().patch(t.parent),!0}function l(e){var n=a(e.element);if(n){if(c(e,n),(0,t.exitDocument)(e.element),e.element&&e.inDocument){var r=e.getAttachData();e.attachElement(r.parent,r.sibling)}return!0}}Object.defineProperty(e,"__esModule",{value:!0}),e.getPatchingComponent=i,e.patch=u;var d=[]});