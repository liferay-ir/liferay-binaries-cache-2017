{"version":3,"sources":["../../src/__tests__/namespace.test.js"],"names":["ns","pkg","name","it","expect","makeNamespace","toBe","describe","isNamespaced","getNamespace","toBeNull","addNamespace","toThrow","allowOverride","removeNamespace"],"mappings":"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","file":"namespace.test.js","sourcesContent":["/**\n * Â© 2017 Liferay, Inc. <https://liferay.com>\n *\n * SPDX-License-Identifier: LGPL-3.0-or-later\n */\n\nimport * as ns from '../namespace';\n\nconst pkg = {\n\tname: 'a-package',\n};\n\nit('makeNamespace works', () => {\n\texpect(ns.makeNamespace(pkg)).toBe('a-package$');\n});\n\ndescribe('when using regular packages', () => {\n\tit('isNamespaced works', () => {\n\t\t// Package alone\n\t\texpect(ns.isNamespaced('a-package$b-package')).toBe(true);\n\t\texpect(ns.isNamespaced('b-package')).toBe(false);\n\n\t\t// Package and module\n\t\texpect(ns.isNamespaced('a-package$b-package/a-module')).toBe(true);\n\t\texpect(ns.isNamespaced('b-package/a-module')).toBe(false);\n\t\texpect(ns.isNamespaced('b-package/a-module/$.a-function')).toBe(false);\n\t});\n\n\tit('getNamespace works', () => {\n\t\t// Package alone\n\t\texpect(ns.getNamespace('a-package$b-package')).toBe('a-package$');\n\t\texpect(ns.getNamespace('b-package')).toBeNull();\n\n\t\t// Package and module\n\t\texpect(ns.getNamespace('a-package$b-package/a-module')).toBe(\n\t\t\t'a-package$'\n\t\t);\n\t\texpect(ns.getNamespace('b-package/a-module')).toBeNull();\n\t\texpect(ns.getNamespace('b-package/a-module/$.a-function')).toBeNull();\n\t});\n\n\tit('addNamespace works', () => {\n\t\t// Package alone\n\t\texpect(ns.addNamespace('a-package$b-package', pkg)).toBe(\n\t\t\t'a-package$b-package'\n\t\t);\n\t\texpect(ns.addNamespace('b-package', pkg)).toBe('a-package$b-package');\n\n\t\t// Package and module\n\t\texpect(ns.addNamespace('a-package$b-package/a-module', pkg)).toBe(\n\t\t\t'a-package$b-package/a-module'\n\t\t);\n\t\texpect(ns.addNamespace('b-package/a-module', pkg)).toBe(\n\t\t\t'a-package$b-package/a-module'\n\t\t);\n\t});\n\n\tit('addNamespace throws if existing namespace and pkg do not match', () => {\n\t\t// Package alone\n\t\texpect(() => ns.addNamespace('other-package$b-package', pkg)).toThrow();\n\n\t\t// Package and module\n\t\texpect(() =>\n\t\t\tns.addNamespace('other-package$b-package/a-module', pkg)\n\t\t).toThrow();\n\t});\n\n\tit('addNamespace does not throw when allowOverride is true', () => {\n\t\t// Package alone\n\t\texpect(\n\t\t\tns.addNamespace('other-package$b-package', pkg, {\n\t\t\t\tallowOverride: true,\n\t\t\t})\n\t\t).toBe('a-package$b-package');\n\n\t\t// Package and module\n\t\texpect(\n\t\t\tns.addNamespace('other-package$b-package/a-module', pkg, {\n\t\t\t\tallowOverride: true,\n\t\t\t})\n\t\t).toBe('a-package$b-package/a-module');\n\t});\n\n\tit('addNamespace leaves local module names untouched', () => {\n\t\texpect(ns.addNamespace('./path/to/module', {name: 'a-package'})).toBe(\n\t\t\t'./path/to/module'\n\t\t);\n\n\t\texpect(ns.addNamespace('../path/to/module', {name: 'a-package'})).toBe(\n\t\t\t'../path/to/module'\n\t\t);\n\n\t\texpect(\n\t\t\tns.addNamespace('a-package/path/to/module', {name: 'a-package'})\n\t\t).toBe('a-package/path/to/module');\n\t});\n\n\tit('removeNamespace works', () => {\n\t\t// Package alone\n\t\texpect(ns.removeNamespace('a-package$b-package')).toBe('b-package');\n\t\texpect(ns.removeNamespace('b-package')).toBe('b-package');\n\n\t\t// Package and module\n\t\texpect(ns.removeNamespace('a-package$b-package/a-module')).toBe(\n\t\t\t'b-package/a-module'\n\t\t);\n\t\texpect(ns.removeNamespace('b-package/a-module')).toBe(\n\t\t\t'b-package/a-module'\n\t\t);\n\t\texpect(ns.removeNamespace('b-package/a-module/$.a-function')).toBe(\n\t\t\t'b-package/a-module/$.a-function'\n\t\t);\n\t});\n});\n\ndescribe('when using scoped packages', () => {\n\tit('isNamespaced works', () => {\n\t\t// Scope alone\n\t\texpect(ns.isNamespaced('@a-package$scope')).toBe(true);\n\t\texpect(ns.isNamespaced('@scope')).toBe(false);\n\n\t\t// Scope and package\n\t\texpect(ns.isNamespaced('@a-package$scope/b-package')).toBe(true);\n\t\texpect(ns.isNamespaced('@scope/b-package')).toBe(false);\n\n\t\t// Scope, package and module\n\t\texpect(ns.isNamespaced('@a-package$scope/b-package/a-module')).toBe(\n\t\t\ttrue\n\t\t);\n\t\texpect(ns.isNamespaced('@scope/b-package/a-module')).toBe(false);\n\t\texpect(ns.isNamespaced('@scope/b-package/a-module/$.a-function')).toBe(\n\t\t\tfalse\n\t\t);\n\t});\n\n\tit('getNamespace works', () => {\n\t\t// Package alone\n\t\texpect(ns.getNamespace('@a-package$scope/b-package')).toBe(\n\t\t\t'a-package$'\n\t\t);\n\t\texpect(ns.getNamespace('@scope/b-package')).toBeNull();\n\n\t\t// Package and module\n\t\texpect(ns.getNamespace('@a-package$scope/b-package/a-module')).toBe(\n\t\t\t'a-package$'\n\t\t);\n\t\texpect(ns.getNamespace('@scope/b-package/a-module')).toBeNull();\n\t\texpect(\n\t\t\tns.getNamespace('@scope/b-package/a-module/$.a-function')\n\t\t).toBeNull();\n\t});\n\n\tit('addNamespace works', () => {\n\t\t// Scope alone\n\t\texpect(ns.addNamespace('@a-package$scope', pkg)).toBe(\n\t\t\t'@a-package$scope'\n\t\t);\n\t\texpect(ns.addNamespace('@scope', pkg)).toBe('@a-package$scope');\n\n\t\t// Scope and package\n\t\texpect(ns.addNamespace('@a-package$scope/b-package', pkg)).toBe(\n\t\t\t'@a-package$scope/b-package'\n\t\t);\n\t\texpect(ns.addNamespace('@scope/b-package', pkg)).toBe(\n\t\t\t'@a-package$scope/b-package'\n\t\t);\n\n\t\t// Scope, package and module\n\t\texpect(\n\t\t\tns.addNamespace('@a-package$scope/b-package/a-module', pkg)\n\t\t).toBe('@a-package$scope/b-package/a-module');\n\t\texpect(ns.addNamespace('@scope/b-package/a-module', pkg)).toBe(\n\t\t\t'@a-package$scope/b-package/a-module'\n\t\t);\n\t});\n\n\tit('addNamespace throws if existing namespace and pkg do not match', () => {\n\t\t// Package alone\n\t\texpect(() =>\n\t\t\tns.addNamespace('@other-package$scope/b-package', pkg)\n\t\t).toThrow();\n\n\t\t// Package and module\n\t\texpect(() =>\n\t\t\tns.addNamespace('@other-package$scope/b-package/a-module', pkg)\n\t\t).toThrow();\n\t});\n\n\tit('addNamespace does not throw when allowOverride is true', () => {\n\t\t// Package alone\n\t\texpect(\n\t\t\tns.addNamespace('@other-package$scope/b-package', pkg, {\n\t\t\t\tallowOverride: true,\n\t\t\t})\n\t\t).toBe('@a-package$scope/b-package');\n\n\t\t// Package and module\n\t\texpect(\n\t\t\tns.addNamespace('@other-package$scope/b-package/a-module', pkg, {\n\t\t\t\tallowOverride: true,\n\t\t\t})\n\t\t).toBe('@a-package$scope/b-package/a-module');\n\t});\n\n\tit('addNamespace leaves local module names untouched', () => {\n\t\texpect(\n\t\t\tns.addNamespace('./path/to/module', {name: '@scope/a-package'})\n\t\t).toBe('./path/to/module');\n\n\t\texpect(\n\t\t\tns.addNamespace('../path/to/module', {name: '@scope/a-package'})\n\t\t).toBe('../path/to/module');\n\n\t\texpect(\n\t\t\tns.addNamespace('@scope/a-package/path/to/module', {\n\t\t\t\tname: '@scope/a-package',\n\t\t\t})\n\t\t).toBe('@scope/a-package/path/to/module');\n\t});\n\n\tit('removeNamespace works', () => {\n\t\t// Scope alone\n\t\texpect(ns.removeNamespace('@a-package$scope')).toBe('@scope');\n\t\texpect(ns.removeNamespace('@scope')).toBe('@scope');\n\n\t\t// Scope and package\n\t\texpect(ns.removeNamespace('@a-package$scope/b-package')).toBe(\n\t\t\t'@scope/b-package'\n\t\t);\n\t\texpect(ns.removeNamespace('@scope/b-package')).toBe('@scope/b-package');\n\n\t\t// Scope, package and module\n\t\texpect(ns.removeNamespace('@a-package$scope/b-package/a-module')).toBe(\n\t\t\t'@scope/b-package/a-module'\n\t\t);\n\t\texpect(ns.removeNamespace('@scope/b-package/a-module')).toBe(\n\t\t\t'@scope/b-package/a-module'\n\t\t);\n\t\texpect(\n\t\t\tns.removeNamespace('@scope/b-package/a-module/$.a-function')\n\t\t).toBe('@scope/b-package/a-module/$.a-function');\n\t});\n});\n"]}