{"version":3,"sources":["../src/index.js"],"names":["log","pkgJson","dependencies","Object","keys","forEach","link","name","validRange","depPkgJsonPath","join","depPkgJson","version","info"],"mappings":";;;;;;kBAae,uBAA2B;AAAA,KAAjBA,GAAiB,QAAjBA,GAAiB;AAAA,KAAVC,OAAU,SAAVA,OAAU;;AACzC,KAAIA,QAAQC,YAAR,IAAwB,IAA5B,EAAkC;AACjCC,SAAOC,IAAP,CAAYH,QAAQC,YAApB,EAAkCG,OAAlC,CAA0C,gBAAQ;AACjD,OAAMC,OAAOL,QAAQC,YAAR,CAAqBK,IAArB,CAAb;;AAEA,OAAI,iBAAOC,UAAP,CAAkBF,IAAlB,KAA2B,IAA/B,EAAqC;AACpC,QAAMG,iBAAiB,eAAKC,IAAL,CACtB,cADsB,EAEtBH,IAFsB,EAGtB,cAHsB,CAAvB;;AAMA,QAAMI,aAAa,4BAAaF,cAAb,CAAnB;;AAEAR,YAAQC,YAAR,CAAqBK,IAArB,IAA6BI,WAAWC,OAAxC;;AAEAZ,QAAIa,IAAJ,CACC,6BADD,EAEC,eAFD,EAGCP,IAHD,EAIC,IAJD,EAKCK,WAAWC,OALZ;AAOA;AACD,GAtBD;AAuBA;AACD,C;;AAjCD;;;;AACA;;;;AACA","file":"index.js","sourcesContent":["/**\n * Â© 2017 Liferay, Inc. <https://liferay.com>\n *\n * SPDX-License-Identifier: LGPL-3.0-or-later\n */\n\nimport path from 'path';\nimport readJsonSync from 'read-json-sync';\nimport semver from 'semver';\n\n/**\n * @return {void}\n */\nexport default function({log}, {pkgJson}) {\n\tif (pkgJson.dependencies != null) {\n\t\tObject.keys(pkgJson.dependencies).forEach(name => {\n\t\t\tconst link = pkgJson.dependencies[name];\n\n\t\t\tif (semver.validRange(link) == null) {\n\t\t\t\tconst depPkgJsonPath = path.join(\n\t\t\t\t\t'node_modules',\n\t\t\t\t\tname,\n\t\t\t\t\t'package.json'\n\t\t\t\t);\n\n\t\t\t\tconst depPkgJson = readJsonSync(depPkgJsonPath);\n\n\t\t\t\tpkgJson.dependencies[name] = depPkgJson.version;\n\n\t\t\t\tlog.info(\n\t\t\t\t\t'resolve-linked-dependencies',\n\t\t\t\t\t'Resolved link',\n\t\t\t\t\tlink,\n\t\t\t\t\t'to',\n\t\t\t\t\tdepPkgJson.version\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n}\n"]}